<!DOCTYPE html>
<html lang="sv">
    <head>
        <title>Nyhetssida</title>
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <style>
            body{
                font-family: sans-serif;
                margin: 0;
                background: #f4f4f4;
            }
            header{ 
                background: black; 
                color: white; 
                text-align: center; padding: 1rem;
            }

            .container{
                width: 30%;
                height: 60%;
                margin: 40px auto;
            }

            .card{
                background: white; 
                border-radius: 5px; 
                box-shadow: 0 2px 6px rgba(0,0,0,0.1);
                padding: 1rem;
                margin-bottom: 1rem;
                cursor: pointer;
                transition: 0.2s;
            }
            .card:hover{
                transform: scale(1.2);
            }

            .sidebar{
                position: fixed;
                top: 0;
                width: 100px;
                height: 100%;
                background: black;
                display: flex;
                color: white;
                justify-content: center;
                text-align: center;
                align-items: center;
            }

            .sidebar.left{
                left: 0;
            }
            .sidebar.right{
                right: 0;
            }
            #app{
                background-color: white;
                display: flex;
                justify-content: center;
            }

        </style>
    </head>

<body>
    
        <header>
            <h1>Nyheter: Drug Overdose Deaths In The US</h1>
        </header>
        <div id="app">

        <div class="container">
            <div class="card">
                <h3>{{ message }}</h3>
                <p>{{ article }}</p>
                <small>{{ description }}</small>
            </div>
        </div>
        <div class="sidebar left">
            <p>hejhej</p>
        </div>

        <div class="sidebar right">
            <p>jehjeh</p>
        </div>
    </div>

<script>
  const {createApp, ref, onMounted} = Vue;

  createApp({
    setup() {
        const message = ref('Hello Vue!')
        const article = ref('Give me some text to use please!')
        const description = ref ('description from dataset')

        const fetchJson = async () => {
            try {
                const res = await fetch("dataset.json");
                const json = await res.json();
                const firstRow = json.data[0];

                const year = firstRow[18];
                const group = firstRow[13];
                const estimate = firstRow[17];

                message.value = `${year} - ${group}`;
                article.value = `${estimate} dödsfall per 100 000`;
                description.value = `Under ${year} rapporterades ${estimate} dödsfall bland ${group.toLowerCase()}.`;
            } catch (err) {
                message.value = "Kunde inte ladda data";
                console.error("Fel vid hämtning:", err);
            }           
        };
        onMounted(fetchJson);

      return {
        message,
        article,
        description
      }
      
    }
  }).mount('#app')
</script>

</body>
</html>